--- src/cpp/session/CMakeLists.txt.orig	2024-09-16 17:02:32 UTC
+++ src/cpp/session/CMakeLists.txt
@@ -61,19 +61,19 @@ endif()
 # install pandoc
 # - by default, we use quarto + quarto's bundled pandoc
 # - if quarto is not enabled, use pandoc fallback
-if(QUARTO_ENABLED)
-   set(RSTUDIO_DEPENDENCIES_PANDOC_DIR "${RSTUDIO_DEPENDENCIES_QUARTO_DIR}/bin/tools")
-elseif(EXISTS "${RSTUDIO_TOOLS_ROOT}/pandoc/${PANDOC_VERSION}")
-   set(RSTUDIO_DEPENDENCIES_PANDOC_DIR "${RSTUDIO_TOOLS_ROOT}/pandoc/${PANDOC_VERSION}")
-else()
-   set(RSTUDIO_DEPENDENCIES_PANDOC_DIR "${RSTUDIO_DEPENDENCIES_DIR}/pandoc/${PANDOC_VERSION}")
-endif()
+#if(QUARTO_ENABLED)
+#   set(RSTUDIO_DEPENDENCIES_PANDOC_DIR "${RSTUDIO_DEPENDENCIES_QUARTO_DIR}/bin/tools")
+#elseif(EXISTS "${RSTUDIO_TOOLS_ROOT}/pandoc/${PANDOC_VERSION}")
+#   set(RSTUDIO_DEPENDENCIES_PANDOC_DIR "${RSTUDIO_TOOLS_ROOT}/pandoc/${PANDOC_VERSION}")
+#else()
+#   set(RSTUDIO_DEPENDENCIES_PANDOC_DIR "${RSTUDIO_DEPENDENCIES_DIR}/pandoc/${PANDOC_VERSION}")
+#endif()
 
 
 # validate our dependencies exist
 foreach(VAR RSTUDIO_DEPENDENCIES_DICTIONARIES_DIR
             RSTUDIO_DEPENDENCIES_MATHJAX_DIR
-            RSTUDIO_DEPENDENCIES_PANDOC_DIR
+            #RSTUDIO_DEPENDENCIES_PANDOC_DIR
             RSTUDIO_DEPENDENCIES_QUARTO_DIR)
 
  
@@ -101,13 +101,13 @@ endforeach()
 endforeach()
 
 # verify libclang is installed (Windows only)
-if(WIN32)
-   set(LIBCLANG_VERSION "13.0.1")
-   set(LIBCLANG_DIR "${RSTUDIO_DEPENDENCIES_DIR}/common/libclang/${LIBCLANG_VERSION}")
-   if(NOT EXISTS "${LIBCLANG_DIR}")
-      message(FATAL_ERROR "libclang ${LIBCLANG_VERSION} not found  (re-run install-dependencies script to install)")
-   endif()
-endif()
+#if(WIN32)
+#   set(LIBCLANG_VERSION "13.0.1")
+#   set(LIBCLANG_DIR "${RSTUDIO_DEPENDENCIES_DIR}/common/libclang/${LIBCLANG_VERSION}")
+#   if(NOT EXISTS "${LIBCLANG_DIR}")
+#      message(FATAL_ERROR "libclang ${LIBCLANG_VERSION} not found  (re-run install-dependencies script to install)")
+#   endif()
+#endif()
 
 # include files
 file(GLOB_RECURSE SESSION_HEADER_FILES CONFIGURE_DEPENDS "*.h*")
@@ -537,6 +537,9 @@ endif()
 
 endif()
 
+# additional libraries
+target_link_libraries(rsession -L${FREEBSD_LIBDIR} -linotify -lprocstat)
+
 # skip libR RPATH at development time
 if(RSTUDIO_DEVELOPMENT OR RSTUDIO_RUN_IN_PLACE)
    set_target_properties(rsession PROPERTIES SKIP_BUILD_RPATH TRUE)
@@ -736,10 +739,10 @@ if(NOT RSTUDIO_SESSION_WIN32 AND NOT RSESSION_ALTERNAT
                PATTERN ".gitignore"
                EXCLUDE)
       endif()
-   else()
-      install(DIRECTORY "${RSTUDIO_DEPENDENCIES_PANDOC_DIR}/"
-              DESTINATION "${RSTUDIO_INSTALL_BIN}/pandoc"
-              USE_SOURCE_PERMISSIONS)
+   #else()
+      #install(DIRECTORY "${RSTUDIO_DEPENDENCIES_PANDOC_DIR}/"
+      #        DESTINATION "${RSTUDIO_INSTALL_BIN}/pandoc"
+      #        USE_SOURCE_PERMISSIONS)
    endif()
 
    # install embedded packages
@@ -780,14 +783,14 @@ if(NOT RSTUDIO_SESSION_WIN32 AND NOT RSESSION_ALTERNAT
       DESTINATION ${RSTUDIO_INSTALL_SUPPORTING}/resources)
 
    # install libclang
-   if(WIN32)
-      file(GLOB LIBCLANG_32_FILES "${LIBCLANG_DIR}/x86/*")
-      install(PROGRAMS ${LIBCLANG_32_FILES}
-              DESTINATION  ${RSTUDIO_INSTALL_BIN}/rsclang/x86)
-      file(GLOB LIBCLANG_64_FILES "${LIBCLANG_DIR}/x86_64/*")
-      install(PROGRAMS ${LIBCLANG_64_FILES}
-              DESTINATION  ${RSTUDIO_INSTALL_BIN}/rsclang/x86_64)
-   endif()
+   #if(WIN32)
+   #   file(GLOB LIBCLANG_32_FILES "${LIBCLANG_DIR}/x86/*")
+   #   install(PROGRAMS ${LIBCLANG_32_FILES}
+   #           DESTINATION  ${RSTUDIO_INSTALL_BIN}/rsclang/x86)
+   #   file(GLOB LIBCLANG_64_FILES "${LIBCLANG_DIR}/x86_64/*")
+   #   install(PROGRAMS ${LIBCLANG_64_FILES}
+   #           DESTINATION  ${RSTUDIO_INSTALL_BIN}/rsclang/x86_64)
+   #endif()
 
    # install winpty on windows
    if(WIN32)
